{"ast":null,"code":"var _jsxFileName = \"D:\\\\Covid\\\\Demo\\\\src\\\\components\\\\sign-in\\\\sign-in.component.jsx\";\nimport React, { useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { AuthContext } from \"../../App\";\nimport FormInput from \"../form-input/form-input.component\";\nimport CustomButton from \"../custom-button/custom-button.component\";\nimport { signin } from \"../../apis\";\nimport { SignInContainer, ButtonsBarContainer } from \"./sign-in.styles\";\n\nconst SignIn = () => {\n  const {\n    dispatch\n  } = React.useContext(AuthContext);\n  const initialState = {\n    hospitalCode: \"HSP1\",\n    password: \"qwert123\",\n    isSubmitting: false,\n    errorMessage: null\n  };\n  const [values, setValues] = useState(initialState);\n  const {\n    hospitalCode,\n    password,\n    isAuthenticated\n  } = values; //const { user } = isAuthenticated();\n\n  const handleChange = name => event => {\n    setValues({ ...values,\n      error: false,\n      [name]: event.target.value\n    });\n  };\n\n  const onSubmit = event => {\n    event.preventDefault();\n    setValues({ ...values,\n      error: false,\n      loading: true\n    });\n    signin({\n      hospitalCode,\n      password\n    }).then(res => {\n      if (!res.Error) {\n        return res[0].json();\n      }\n\n      throw res;\n    }).then(resJson => {\n      console.log(resJson);\n      dispatch({\n        type: \"LOGIN\",\n        payload: resJson\n      });\n    });\n  }; // const loadingMessage = () => {\n  //   return (\n  //     loading && (\n  //       <div className=\"ui red message\">\n  //         <h2>Loading...</h2>\n  //       </div>\n  //     )\n  //   );\n  // };\n\n\n  const performRedirect = () => {\n    //console.log(\"redir\");\n    if (isAuthenticated) {\n      console.log(\"isauth\", isAuthenticated);\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 14\n        }\n      });\n    }\n  }; // const errorMessage = () => {\n  //   return (\n  //     <div className=\"column\" style={{ display: error ? \"\" : \"none\" }}>\n  //       <div className=\"ui segment\">\n  //         <div\n  //           className=\"ui red message\"\n  //           style={{ display: error ? \"\" : \"none\" }}\n  //         >\n  //           {error}\n  //         </div>\n  //       </div>\n  //     </div>\n  //   );\n  // };\n\n\n  return /*#__PURE__*/React.createElement(SignInContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, \"Sign in with your email and password\"), /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(FormInput, {\n    name: \"hospitalCode\",\n    type: \"text\",\n    handleChange: handleChange(\"hospitalCode\"),\n    value: hospitalCode,\n    label: \"hospitalCode\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(FormInput, {\n    name: \"password\",\n    type: \"password\",\n    value: password,\n    handleChange: handleChange(\"password\"),\n    label: \"password\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(ButtonsBarContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CustomButton, {\n    onClick: onSubmit,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, \"Sign in\"))), performRedirect());\n};\n\nexport default SignIn;","map":{"version":3,"sources":["D:/Covid/Demo/src/components/sign-in/sign-in.component.jsx"],"names":["React","useState","Redirect","AuthContext","FormInput","CustomButton","signin","SignInContainer","ButtonsBarContainer","SignIn","dispatch","useContext","initialState","hospitalCode","password","isSubmitting","errorMessage","values","setValues","isAuthenticated","handleChange","name","event","error","target","value","onSubmit","preventDefault","loading","then","res","Error","json","resJson","console","log","type","payload","performRedirect"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../App\";\r\n\r\nimport FormInput from \"../form-input/form-input.component\";\r\nimport CustomButton from \"../custom-button/custom-button.component\";\r\nimport { signin } from \"../../apis\";\r\n\r\nimport { SignInContainer, ButtonsBarContainer } from \"./sign-in.styles\";\r\n\r\nconst SignIn = () => {\r\n  \r\n  const { dispatch } = React.useContext(AuthContext);\r\n  const initialState = {\r\n    hospitalCode: \"HSP1\",\r\n    password: \"qwert123\",\r\n    isSubmitting: false,\r\n    errorMessage: null\r\n  };\r\n\r\n  const [values, setValues] = useState(initialState);\r\n\r\n  const { hospitalCode, password, isAuthenticated } = values;\r\n  //const { user } = isAuthenticated();\r\n\r\n  const handleChange = (name) => (event) => {\r\n    setValues({ ...values, error: false, [name]: event.target.value });\r\n  };\r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault();\r\n    setValues({ ...values, error: false, loading: true });\r\n    signin({ hospitalCode, password }).then(res => {\r\n      if (!res.Error) {\r\n        return res[0].json();\r\n      }\r\n      throw res;\r\n    }).then(resJson => {\r\n      console.log(resJson);\r\n      dispatch({\r\n          type: \"LOGIN\",\r\n          payload: resJson\r\n      })\r\n    })     \r\n  };\r\n\r\n  // const loadingMessage = () => {\r\n  //   return (\r\n  //     loading && (\r\n  //       <div className=\"ui red message\">\r\n  //         <h2>Loading...</h2>\r\n  //       </div>\r\n  //     )\r\n  //   );\r\n  // };\r\n\r\n  const performRedirect = () => {\r\n    //console.log(\"redir\");\r\n    if (isAuthenticated) {\r\n      console.log(\"isauth\", isAuthenticated);\r\n      return <Redirect to=\"/\" />;\r\n    }\r\n  };\r\n\r\n  // const errorMessage = () => {\r\n  //   return (\r\n  //     <div className=\"column\" style={{ display: error ? \"\" : \"none\" }}>\r\n  //       <div className=\"ui segment\">\r\n  //         <div\r\n  //           className=\"ui red message\"\r\n  //           style={{ display: error ? \"\" : \"none\" }}\r\n  //         >\r\n  //           {error}\r\n  //         </div>\r\n  //       </div>\r\n  //     </div>\r\n  //   );\r\n  // };\r\n\r\n  return (\r\n    <SignInContainer>\r\n      <span>Sign in with your email and password</span>\r\n\r\n      <form>\r\n        <FormInput\r\n          name=\"hospitalCode\"\r\n          type=\"text\"\r\n          handleChange={handleChange(\"hospitalCode\")}\r\n          value={hospitalCode}\r\n          label=\"hospitalCode\"\r\n          required\r\n        />\r\n        <FormInput\r\n          name=\"password\"\r\n          type=\"password\"\r\n          value={password}\r\n          handleChange={handleChange(\"password\")}\r\n          label=\"password\"\r\n          required\r\n        />\r\n        <ButtonsBarContainer>\r\n          <CustomButton onClick={onSubmit} type=\"submit\">\r\n            Sign in\r\n          </CustomButton>\r\n        </ButtonsBarContainer>\r\n      </form>\r\n      {performRedirect()}\r\n    </SignInContainer>\r\n  );\r\n};\r\n\r\nexport default SignIn;\r\n"]},"metadata":{},"sourceType":"module"}